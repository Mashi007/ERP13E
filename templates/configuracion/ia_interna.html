<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IA Interna - Configuraci√≥n - ERP13 Enterprise</title>
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Select2 -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #8B5CF6;
            --secondary-color: #3B82F6;
            --success-color: #10B981;
            --warning-color: #F59E0B;
            --danger-color: #EF4444;
            --dark-color: #1F2937;
            --light-color: #F9FAFB;
            --ai-color: #06B6D4;
        }

        body {
            background-color: var(--light-color);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .sidebar {
            background: linear-gradient(135deg, var(--dark-color) 0%, #374151 100%);
            min-height: 100vh;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-item {
            color: #D1D5DB;
            padding: 12px 20px;
            text-decoration: none;
            display: block;
            transition: all 0.3s ease;
            border-radius: 8px;
            margin: 4px 8px;
        }

        .sidebar-item:hover, .sidebar-item.active {
            background-color: var(--primary-color);
            color: white;
            transform: translateX(5px);
        }

        .main-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin: 20px;
            min-height: calc(100vh - 40px);
        }

        .config-header {
            background: linear-gradient(135deg, #06B6D4 0%, #0891B2 100%);
            border-radius: 12px;
            padding: 25px;
            color: white;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .config-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="circuit" patternUnits="userSpaceOnUse" width="20" height="20"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/><path d="M5,5 L15,5 M10,0 L10,20 M5,15 L15,15" stroke="rgba(255,255,255,0.05)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23circuit)"/></svg>');
            pointer-events: none;
        }

        .ai-status-indicator {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
            border: 2px solid #bbf7d0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .provider-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 4px solid var(--ai-color);
            transition: transform 0.3s ease;
        }

        .provider-card:hover {
            transform: translateY(-2px);
        }

        .provider-card.active {
            border-left-color: var(--success-color);
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }

        .provider-logo {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-right: 15px;
        }

        .openai-logo { background: linear-gradient(135deg, #10A37F 0%, #0F8B73 100%); }
        .claude-logo { background: linear-gradient(135deg, #FF6B35 0%, #F05A2E 100%); }
        .deepseek-logo { background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%); }
        .custom-logo { background: linear-gradient(135deg, #6B7280 0%, #4B5563 100%); }

        .connection-status {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .status-connected { background: #D1FAE5; color: #065F46; }
        .status-disconnected { background: #FEE2E2; color: #991B1B; }
        .status-testing { background: #FEF3C7; color: #92400E; }

        .token-input {
            position: relative;
        }

        .token-input input[type="password"] {
            padding-right: 120px;
        }

        .token-actions {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 5px;
        }

        .document-upload-area {
            border: 2px dashed #CBD5E1;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .document-upload-area:hover {
            border-color: var(--ai-color);
            background-color: #F0F9FF;
        }

        .document-upload-area.dragover {
            border-color: var(--success-color);
            background-color: #F0FDF4;
        }

        .uploaded-document {
            background: #F8FAFC;
            border: 1px solid #E2E8F0;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .document-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .document-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .doc-pdf { background: #EF4444; }
        .doc-word { background: #2563EB; }
        .doc-excel { background: #10B981; }
        .doc-text { background: #6B7280; }

        .processing-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.875rem;
        }

        .status-processed { color: var(--success-color); }
        .status-processing { color: var(--warning-color); }
        .status-error { color: var(--danger-color); }

        .module-config {
            background: #F9FAFB;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .module-config h6 {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .parameter-group {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #E2E8F0;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #CBD5E1;
            transition: 0.3s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--ai-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--ai-color);
        }

        .stat-label {
            color: #6B7280;
            font-size: 0.875rem;
            margin-top: 5px;
        }

        .breadcrumb-config {
            background: none;
            padding: 0;
            margin-bottom: 20px;
        }

        .breadcrumb-config .breadcrumb-item a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .breadcrumb-config .breadcrumb-item.active {
            color: #6B7280;
        }

        .config-tabs {
            border-bottom: 2px solid #E5E7EB;
            margin-bottom: 30px;
        }

        .config-tabs .nav-link {
            color: #6B7280;
            font-weight: 600;
            padding: 15px 20px;
            border: none;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .config-tabs .nav-link.active {
            color: var(--ai-color);
            border-bottom-color: var(--ai-color);
            background: none;
        }

        .config-tabs .nav-link:hover {
            color: var(--ai-color);
            background: rgba(6, 182, 212, 0.1);
        }

        .variable-editor {
            background: #F3F4F6;
            border: 1px solid #D1D5DB;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.875rem;
        }

        .quick-actions {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .quick-action-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .quick-action-btn:hover {
            transform: scale(1.1);
        }

        .brain-pulse {
            animation: brainPulse 3s ease-in-out infinite;
        }

        @keyframes brainPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 768px) {
            .stats-row {
                grid-template-columns: 1fr 1fr;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .cost-indicator {
            font-size: 0.875rem;
            color: #6B7280;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar">
                <div class="p-3">
                    <h4 class="text-white mb-4">
                        <i class="fas fa-cog"></i> Configuraci√≥n
                    </h4>
                    
                    <nav>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-sliders-h"></i> Configuraci√≥n General
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-users-cog"></i> Gesti√≥n de Usuarios
                        </a>
                        <a href="#" class="sidebar-item active">
                            <i class="fas fa-brain"></i> IA Interna
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-file-invoice-dollar"></i> Plantillas Presupuesto
                        </a>
                        <a href="#" class="sidebar-item">
                            <i class="fas fa-receipt"></i> Configuraci√≥n Facturaci√≥n
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10">
                <div class="main-content">
                    <div class="p-4">
                        <!-- Breadcrumb -->
                        <nav aria-label="breadcrumb" class="breadcrumb-config">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                                <li class="breadcrumb-item"><a href="#">Clientes</a></li>
                                <li class="breadcrumb-item active">IA Interna</li>
                            </ol>
                        </nav>

                        <!-- Header -->
                        <div class="config-header">
                            <div class="d-flex justify-content-between align-items-center position-relative">
                                <div>
                                    <h2 class="mb-2">
                                        <i class="fas fa-brain brain-pulse"></i> Configuraci√≥n IA Interna
                                    </h2>
                                    <p class="mb-0 opacity-90">
                                        Configura proveedores de IA, documentos de entrenamiento y par√°metros por m√≥dulo
                                    </p>
                                </div>
                                <div class="text-end">
                                    <button class="btn btn-light" id="testAllConnections">
                                        <i class="fas fa-satellite-dish"></i> Probar Conexiones
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- AI Status Indicator -->
                        <div class="ai-status-indicator">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="mb-2 text-success">
                                        <i class="fas fa-check-circle"></i> Sistema IA Operativo
                                    </h5>
                                    <p class="mb-0 text-muted">
                                        2 proveedores conectados ‚Ä¢ 15 documentos procesados ‚Ä¢ M√≥dulo Clientes: Activo
                                    </p>
                                </div>
                                <div class="text-end">
                                    <div class="h4 mb-0 text-success">98.7%</div>
                                    <div class="small text-muted">Disponibilidad</div>
                                </div>
                            </div>
                        </div>

                        <!-- Stats Row -->
                        <div class="stats-row">
                            <div class="stat-card">
                                <div class="stat-number">3</div>
                                <div class="stat-label">
                                    <i class="fas fa-plug text-success"></i> Proveedores Activos
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">15</div>
                                <div class="stat-label">
                                    <i class="fas fa-file-alt text-info"></i> Documentos Entrenamiento
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">1,247</div>
                                <div class="stat-label">
                                    <i class="fas fa-comments text-primary"></i> Conversaciones IA
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">$23.45</div>
                                <div class="stat-label">
                                    <i class="fas fa-dollar-sign text-warning"></i> Coste Mensual
                                </div>
                            </div>
                        </div>

                        <!-- Configuration Tabs -->
                        <ul class="nav nav-tabs config-tabs" id="aiConfigTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="providers-tab" data-bs-toggle="tab" data-bs-target="#providers" type="button" role="tab">
                                    <i class="fas fa-satellite-dish"></i> Proveedores IA
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="documents-tab" data-bs-toggle="tab" data-bs-target="#documents" type="button" role="tab">
                                    <i class="fas fa-upload"></i> Documentos Entrenamiento
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="modules-tab" data-bs-toggle="tab" data-bs-target="#modules" type="button" role="tab">
                                    <i class="fas fa-cogs"></i> Configuraci√≥n por M√≥dulos
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="variables-tab" data-bs-toggle="tab" data-bs-target="#variables" type="button" role="tab">
                                    <i class="fas fa-code"></i> Variables y Par√°metros
                                </button>
                            </li>
                        </ul>

                        <!-- Tab Content -->
                        <div class="tab-content" id="aiConfigTabContent">
                            
                            <!-- Providers Tab -->
                            <div class="tab-pane fade show active" id="providers" role="tabpanel">
                                <!-- OpenAI Provider -->
                                <div class="provider-card active">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div class="d-flex align-items-center">
                                            <div class="provider-logo openai-logo">
                                                <i class="fas fa-robot"></i>
                                            </div>
                                            <div>
                                                <h5 class="mb-1 fw-bold">OpenAI GPT</h5>
                                                <div class="mb-2">
                                                    <span class="connection-status status-connected">
                                                        <i class="fas fa-check-circle"></i> Conectado
                                                    </span>
                                                </div>
                                                <div class="small text-muted">
                                                    Modelo: gpt-4-turbo ‚Ä¢ √öltima conexi√≥n: Hace 2 min
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-end">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" checked id="openaiActive">
                                                <label class="form-check-label" for="openaiActive">
                                                    Activo
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-3">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <label class="form-label small">API Key</label>
                                                <div class="token-input">
                                                    <input type="password" class="form-control" value="sk-proj-abc123..." placeholder="Ingresa tu API Key de OpenAI">
                                                    <div class="token-actions">
                                                        <button class="btn btn-sm btn-outline-secondary" type="button" id="toggleOpenAI">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                        <button class="btn btn-sm btn-outline-primary" type="button" id="testOpenAI">
                                                            <i class="fas fa-satellite-dish"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Modelo</label>
                                                <select class="form-select">
                                                    <option value="gpt-4-turbo" selected>GPT-4 Turbo</option>
                                                    <option value="gpt-4">GPT-4</option>
                                                    <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-4">
                                                <label class="form-label small">Max Tokens</label>
                                                <input type="number" class="form-control" value="4000" min="100" max="8000">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Temperature</label>
                                                <input type="number" class="form-control" value="0.7" min="0" max="2" step="0.1">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Prioridad</label>
                                                <select class="form-select">
                                                    <option value="1" selected>Principal</option>
                                                    <option value="2">Secundario</option>
                                                    <option value="3">Backup</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="cost-indicator mt-2">
                                            <i class="fas fa-info-circle"></i> Coste estimado: $0.03/1K tokens ‚Ä¢ L√≠mite mensual: $50
                                        </div>
                                    </div>
                                </div>

                                <!-- Claude Provider -->
                                <div class="provider-card active">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div class="d-flex align-items-center">
                                            <div class="provider-logo claude-logo">
                                                <i class="fas fa-brain"></i>
                                            </div>
                                            <div>
                                                <h5 class="mb-1 fw-bold">Anthropic Claude</h5>
                                                <div class="mb-2">
                                                    <span class="connection-status status-connected">
                                                        <i class="fas fa-check-circle"></i> Conectado
                                                    </span>
                                                </div>
                                                <div class="small text-muted">
                                                    Modelo: claude-3-sonnet ‚Ä¢ √öltima conexi√≥n: Hace 1 min
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-end">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" checked id="claudeActive">
                                                <label class="form-check-label" for="claudeActive">
                                                    Activo
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-3">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <label class="form-label small">API Key</label>
                                                <div class="token-input">
                                                    <input type="password" class="form-control" value="sk-ant-api03-xyz789..." placeholder="Ingresa tu API Key de Claude">
                                                    <div class="token-actions">
                                                        <button class="btn btn-sm btn-outline-secondary" type="button" id="toggleClaude">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                        <button class="btn btn-sm btn-outline-primary" type="button" id="testClaude">
                                                            <i class="fas fa-satellite-dish"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Modelo</label>
                                                <select class="form-select">
                                                    <option value="claude-3-opus">Claude 3 Opus</option>
                                                    <option value="claude-3-sonnet" selected>Claude 3 Sonnet</option>
                                                    <option value="claude-3-haiku">Claude 3 Haiku</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mt-3">
                                            <div class="col-md-4">
                                                <label class="form-label small">Max Tokens</label>
                                                <input type="number" class="form-control" value="4000" min="100" max="8000">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Temperature</label>
                                                <input type="number" class="form-control" value="0.7" min="0" max="1" step="0.1">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Prioridad</label>
                                                <select class="form-select">
                                                    <option value="1">Principal</option>
                                                    <option value="2" selected>Secundario</option>
                                                    <option value="3">Backup</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="cost-indicator mt-2">
                                            <i class="fas fa-info-circle"></i> Coste estimado: $0.015/1K tokens ‚Ä¢ L√≠mite mensual: $30
                                        </div>
                                    </div>
                                </div>

                                <!-- DeepSeek Provider -->
                                <div class="provider-card">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div class="d-flex align-items-center">
                                            <div class="provider-logo deepseek-logo">
                                                <i class="fas fa-search"></i>
                                            </div>
                                            <div>
                                                <h5 class="mb-1 fw-bold">DeepSeek</h5>
                                                <div class="mb-2">
                                                    <span class="connection-status status-disconnected">
                                                        <i class="fas fa-times-circle"></i> Desconectado
                                                    </span>
                                                </div>
                                                <div class="small text-muted">
                                                    Modelo: deepseek-chat ‚Ä¢ Sin configurar
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-end">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="deepseekActive">
                                                <label class="form-check-label" for="deepseekActive">
                                                    Activo
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-3">
                                        <div class="row">
                                            <div class="col-md-8">
                                                <label class="form-label small">API Key</label>
                                                <div class="token-input">
                                                    <input type="password" class="form-control" placeholder="Ingresa tu API Key de DeepSeek">
                                                    <div class="token-actions">
                                                        <button class="btn btn-sm btn-outline-secondary" type="button">
                                                            <i class="fas fa-eye"></i>
                                                        </button>
                                                        <button class="btn btn-sm btn-outline-primary" type="button">
                                                            <i class="fas fa-satellite-dish"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Modelo</label>
                                                <select class="form-select">
                                                    <option value="deepseek-chat" selected>DeepSeek Chat</option>
                                                    <option value="deepseek-coder">DeepSeek Coder</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="cost-indicator mt-2">
                                            <i class="fas fa-info-circle"></i> Coste estimado: $0.14/1M tokens ‚Ä¢ Muy econ√≥mico
                                        </div>
                                    </div>
                                </div>

                                <!-- Add Custom Provider -->
                                <div class="text-center mt-4">
                                    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addProviderModal">
                                        <i class="fas fa-plus"></i> A√±adir Proveedor Personalizado
                                    </button>
                                </div>
                            </div>

                            <!-- Documents Tab -->
                            <div class="tab-pane fade" id="documents" role="tabpanel">
                                <!-- Upload Area -->
                                <div class="document-upload-area" id="documentUploadArea">
                                    <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                    <h5 class="mb-2">Subir Documentos de Entrenamiento</h5>
                                    <p class="text-muted mb-3">
                                        Arrastra archivos aqu√≠ o haz clic para seleccionar
                                    </p>
                                    <p class="small text-muted mb-0">
                                        Formatos soportados: PDF, DOCX, TXT, MD ‚Ä¢ Tama√±o m√°ximo: 10MB por archivo
                                    </p>
                                    <input type="file" id="documentUpload" multiple accept=".pdf,.docx,.txt,.md" style="display: none;">
                                </div>

                                <!-- Uploaded Documents -->
                                <div class="uploaded-documents">
                                    <div class="uploaded-document">
                                        <div class="document-info">
                                            <div class="document-icon doc-pdf">
                                                <i class="fas fa-file-pdf"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-1">Manual_Procedimientos_Clientes.pdf</h6>
                                                <div class="small text-muted">2.3 MB ‚Ä¢ Subido hace 2 d√≠as</div>
                                                <div class="processing-status status-processed">
                                                    <i class="fas fa-check-circle"></i>
                                                    <span>Procesado y vectorizado</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown">
                                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#"><i class="fas fa-download"></i> Descargar</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="fas fa-eye"></i> Vista previa</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="fas fa-sync"></i> Reprocesar</a></li>
                                                <li><hr class="dropdown-divider"></li>
                                                <li><a class="dropdown-item text-danger" href="#"><i class="fas fa-trash"></i> Eliminar</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="uploaded-document">
                                        <div class="document-info">
                                            <div class="document-icon doc-word">
                                                <i class="fas fa-file-word"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-1">Politicas_Comunicacion_Cliente.docx</h6>
                                                <div class="small text-muted">1.8 MB ‚Ä¢ Subido hace 1 d√≠a</div>
                                                <div class="processing-status status-processed">
                                                    <i class="fas fa-check-circle"></i>
                                                    <span>Procesado y vectorizado</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown">
                                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#"><i class="fas fa-download"></i> Descargar</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="fas fa-eye"></i> Vista previa</a></li>
                                                <li><a class="dropdown-item" href="#"><i class="fas fa-sync"></i> Reprocesar</a></li>
                                                <li><hr class="dropdown-divider"></li>
                                                <li><a class="dropdown-item text-danger" href="#"><i class="fas fa-trash"></i> Eliminar</a></li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="uploaded-document">
                                        <div class="document-info">
                                            <div class="document-icon doc-text">
                                                <i class="fas fa-file-alt"></i>
                                            </div>
                                            <div>
                                                <h6 class="mb-1">FAQ_Clientes_Frecuentes.txt</h6>
                                                <div class="small text-muted">456 KB ‚Ä¢ Subido hace 3 horas</div>
                                                <div class="processing-status status-processing">
                                                    <i class="fas fa-spinner fa-spin"></i>
                                                    <span>Procesando...</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown">
                                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" disabled>
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Processing Stats -->
                                <div class="mt-4">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="text-center p-3 bg-light rounded">
                                                <div class="h4 text-success mb-1">12</div>
                                                <div class="small text-muted">Documentos Procesados</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-3 bg-light rounded">
                                                <div class="h4 text-warning mb-1">1</div>
                                                <div class="small text-muted">En Procesamiento</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-3 bg-light rounded">
                                                <div class="h4 text-info mb-1">2.1 GB</div>
                                                <div class="small text-muted">Espacio Utilizado</div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="text-center p-3 bg-light rounded">
                                                <div class="h4 text-primary mb-1">847K</div>
                                                <div class="small text-muted">Tokens Generados</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Modules Configuration Tab -->
                            <div class="tab-pane fade" id="modules" role="tabpanel">
                                <!-- Clientes Module -->
                                <div class="module-config">
                                    <h6><i class="fas fa-users text-primary"></i> M√≥dulo Clientes</h6>
                                    
                                    <div class="parameter-group">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <div>
                                                <h6 class="mb-1">Chat AI Contextual</h6>
                                                <div class="small text-muted">Habilitar asistente IA espec√≠fico para cada cliente</div>
                                            </div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label class="form-label small">Proveedor Preferido</label>
                                                <select class="form-select">
                                                    <option value="openai" selected>OpenAI GPT-4</option>
                                                    <option value="claude">Claude 3 Sonnet</option>
                                                    <option value="deepseek">DeepSeek Chat</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small">Contexto M√°ximo</label>
                                                <select class="form-select">
                                                    <option value="basic">B√°sico (historial reciente)</option>
                                                    <option value="extended" selected>Extendido (propuestas + comunicaciones)</option>
                                                    <option value="full">Completo (toda la actividad)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="parameter-group">
                                        <h6 class="mb-3">Variables de Contexto Disponibles</h6>
                                        <div class="variable-editor">{{clientName}} - Nombre del cliente
{{companyName}} - Nombre de la empresa
{{industryType}} - Sector/Industria
{{contactPerson}} - Persona de contacto principal
{{lastInteraction}} - √öltima interacci√≥n registrada
{{proposalStatus}} - Estado de propuestas activas
{{pipelineStage}} - Etapa actual en el pipeline
{{totalValue}} - Valor total de oportunidades
{{assignedSalesperson}} - Comercial asignado
{{communicationHistory}} - Historial de comunicaciones
{{ticketsOpen}} - Tickets abiertos
{{lastCampaign}} - √öltima campa√±a dirigida</div>
                                    </div>

                                    <div class="parameter-group">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <label class="form-label small">Temperatura</label>
                                                <input type="number" class="form-control" value="0.7" min="0" max="1" step="0.1">
                                                <div class="small text-muted mt-1">Creatividad de respuestas (0.0-1.0)</div>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Max Tokens Respuesta</label>
                                                <input type="number" class="form-control" value="500" min="50" max="2000">
                                                <div class="small text-muted mt-1">Longitud m√°xima de respuestas</div>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label small">Memoria Conversaci√≥n</label>
                                                <select class="form-select">
                                                    <option value="5">5 mensajes</option>
                                                    <option value="10" selected>10 mensajes</option>
                                                    <option value="20">20 mensajes</option>
                                                    <option value="50">50 mensajes</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Propuestas Module -->
                                <div class="module-config">
                                    <h6><i class="fas fa-file-alt text-success"></i> M√≥dulo Propuestas</h6>
                                    
                                    <div class="parameter-group">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <div>
                                                <h6 class="mb-1">Generaci√≥n Autom√°tica de Propuestas</h6>
                                                <div class="small text-muted">IA puede generar propuestas basadas en plantillas</div>
                                            </div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label class="form-label small">Nivel de Personalizaci√≥n</label>
                                                <select class="form-select">
                                                    <option value="low">Bajo (plantilla base)</option>
                                                    <option value="medium" selected>Medio (adaptaci√≥n por sector)</option>
                                                    <option value="high">Alto (completamente personalizado)</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label small">Aprobaci√≥n Requerida</label>
                                                <select class="form-select">
                                                    <option value="none">Sin aprobaci√≥n</option>
                                                    <option value="supervisor" selected>Supervisor</option>
                                                    <option value="manager">Manager</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Comunicaciones Module -->
                                <div class="module-config">
                                    <h6><i class="fas fa-comments text-info"></i> M√≥dulo Comunicaciones</h6>
                                    
                                    <div class="parameter-group">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <div>
                                                <h6 class="mb-1">An√°lisis de Sentimiento Autom√°tico</h6>
                                                <div class="small text-muted">Analizar el tono y sentimiento de las comunicaciones</div>
                                            </div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" checked>
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        
                                        <div class="parameter-group">
                                            <div class="d-flex justify-content-between align-items-center mb-3">
                                                <div>
                                                    <h6 class="mb-1">Sugerencias de Respuesta</h6>
                                                    <div class="small text-muted">IA sugiere respuestas contextualmente apropiadas</div>
                                                </div>
                                                <label class="toggle-switch">
                                                    <input type="checkbox" checked>
                                                    <span class="slider"></span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Variables and Parameters Tab -->
                            <div class="tab-pane fade" id="variables" role="tabpanel">
                                <div class="module-config">
                                    <h6><i class="fas fa-code text-warning"></i> Variables Globales del Sistema</h6>
                                    
                                    <div class="parameter-group">
                                        <h6 class="mb-3">Variables de Cliente</h6>
                                        <div class="variable-editor" id="clientVariables">{{clientName}} - Nombre del cliente
{{companyName}} - Nombre de la empresa del cliente
{{contactName}} - Nombre del contacto principal
{{contactEmail}} - Email del contacto principal  
{{contactPhone}} - Tel√©fono del contacto principal
{{companyAddress}} - Direcci√≥n de la empresa
{{industryType}} - Tipo de industria/sector
{{companySize}} - Tama√±o de la empresa
{{clientSince}} - Cliente desde (fecha)
{{clientStatus}} - Estado del cliente (activo/inactivo)
{{assignedSalesperson}} - Comercial asignado
{{assignedSalespersonEmail}} - Email del comercial asignado</div>
                                        
                                        <div class="d-flex justify-content-end mt-2">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addVariableModal">
                                                <i class="fas fa-plus"></i> A√±adir Variable
                                            </button>
                                        </div>
                                    </div>

                                    <div class="parameter-group">
                                        <h6 class="mb-3">Variables de Propuestas</h6>
                                        <div class="variable-editor">{{proposalId}} - ID √∫nico de la propuesta
{{proposalDate}} - Fecha de creaci√≥n de la propuesta
{{proposalTitle}} - T√≠tulo de la propuesta
{{totalAmount}} - Monto total de la propuesta
{{discountPercentage}} - Porcentaje de descuento aplicado
{{validUntil}} - Fecha de validez de la propuesta
{{deliveryDate}} - Fecha estimada de entrega
{{paymentTerms}} - T√©rminos de pago
{{proposalStatus}} - Estado de la propuesta
{{approvedBy}} - Aprobado por (nombre del aprobador)
{{createdBy}} - Creado por (nombre del creador)</div>
                                    </div>

                                    <div class="parameter-group">
                                        <h6 class="mb-3">Variables del Sistema</h6>
                                        <div class="variable-editor">{{currentDate}} - Fecha actual
{{currentTime}} - Hora actual
{{companyName}} - Nombre de nuestra empresa
{{companyAddress}} - Direcci√≥n de nuestra empresa
{{companyPhone}} - Tel√©fono de nuestra empresa
{{companyEmail}} - Email de nuestra empresa
{{companyWebsite}} - Sitio web de nuestra empresa
{{supportEmail}} - Email de soporte
{{salesEmail}} - Email de ventas</div>
                                    </div>
                                </div>

                                <div class="module-config">
                                    <h6><i class="fas fa-sliders-h text-danger"></i> Par√°metros Avanzados</h6>
                                    
                                    <div class="parameter-group">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label class="form-label">L√≠mite de Rate (requests/minuto)</label>
                                                <input type="number" class="form-control" value="60" min="1" max="1000">
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Timeout Conexi√≥n (segundos)</label>
                                                <input type="number" class="form-control" value="30" min="5" max="120">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="parameter-group">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <label class="form-label">Retry Attempts</label>
                                                <input type="number" class="form-control" value="3" min="1" max="10">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Cache TTL (minutos)</label>
                                                <input type="number" class="form-control" value="15" min="1" max="1440">
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">Log Level</label>
                                                <select class="form-select">
                                                    <option value="error">Error</option>
                                                    <option value="warning">Warning</option>
                                                    <option value="info" selected>Info</option>
                                                    <option value="debug">Debug</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Save Configuration Button -->
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-primary btn-lg px-5" id="saveAIConfiguration">
                                <i class="fas fa-save"></i> Guardar Configuraci√≥n IA
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
        <button class="quick-action-btn btn btn-info" title="Test de conexiones" id="quickTestConnections">
            <i class="fas fa-satellite-dish"></i>
        </button>
        <button class="quick-action-btn btn btn-primary" title="Subir documento" id="quickUploadDoc">
            <i class="fas fa-upload"></i>
        </button>
    </div>

    <!-- Add Variable Modal -->
    <div class="modal fade" id="addVariableModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">A√±adir Variable Personalizada</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addVariableForm">
                        <div class="mb-3">
                            <label class="form-label">Nombre de la Variable</label>
                            <input type="text" class="form-control" placeholder="ej: customField1" pattern="[a-zA-Z][a-zA-Z0-9]*">
                            <div class="form-text">Solo letras y n√∫meros, debe empezar con letra</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Descripci√≥n</label>
                            <input type="text" class="form-control" placeholder="Descripci√≥n de la variable">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tipo de Variable</label>
                            <select class="form-select">
                                <option value="client">Cliente</option>
                                <option value="proposal">Propuesta</option>
                                <option value="system">Sistema</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Valor por Defecto</label>
                            <input type="text" class="form-control" placeholder="Valor opcional por defecto">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveVariable">A√±adir Variable</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Provider Modal -->
    <div class="modal fade" id="addProviderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">A√±adir Proveedor IA Personalizado</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addProviderForm">
                        <div class="mb-3">
                            <label class="form-label">Nombre del Proveedor</label>
                            <input type="text" class="form-control" placeholder="Ej: Gemini, Mistral, Local LLM">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">URL Base API</label>
                            <input type="url" class="form-control" placeholder="https://api.ejemplo.com/v1">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Endpoint de Chat</label>
                            <input type="text" class="form-control" placeholder="/chat/completions" value="/chat/completions">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Formato de Autenticaci√≥n</label>
                            <select class="form-select">
                                <option value="bearer">Bearer Token</option>
                                <option value="apikey">API Key Header</option>
                                <option value="basic">Basic Auth</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Clave API</label>
                            <input type="password" class="form-control" placeholder="Tu clave API">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="saveProvider">A√±adir Proveedor</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        $(document).ready(function() {
            // Document upload functionality
            initializeDocumentUpload();

            // Toggle token visibility
            $('#toggleOpenAI, #toggleClaude').click(function() {
                const input = $(this).closest('.token-input').find('input');
                const icon = $(this).find('i');
                
                if (input.attr('type') === 'password') {
                    input.attr('type', 'text');
                    icon.removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    input.attr('type', 'password');
                    icon.removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });

            // Test connections
            $('#testOpenAI, #testClaude, #testAllConnections, #quickTestConnections').click(function() {
                const btn = $(this);
                const originalText = btn.html();
                
                btn.prop('disabled', true);
                btn.html('<i class="fas fa-spinner fa-spin"></i> Probando...');
                
                setTimeout(() => {
                    btn.prop('disabled', false);
                    btn.html(originalText);
                    
                    showToast('Conexi√≥n exitosa con el proveedor IA', 'success');
                }, 2000);
            });

            // Save AI configuration
            $('#saveAIConfiguration').click(function() {
                const config = gatherAIConfiguration();
                console.log('Saving AI configuration:', config);
                
                showToast('Configuraci√≥n IA guardada exitosamente', 'success');
            });

            // Add custom variable
            $('#saveVariable').click(function() {
                const formData = $('#addVariableForm').serialize();
                console.log('Adding variable:', formData);
                
                $('#addVariableModal').modal('hide');
                showToast('Variable personalizada a√±adida', 'success');
            });

            // Add custom provider
            $('#saveProvider').click(function() {
                const formData = $('#addProviderForm').serialize();
                console.log('Adding provider:', formData);
                
                $('#addProviderModal').modal('hide');
                showToast('Proveedor IA personalizado a√±adido', 'success');
            });

            // Quick upload document
            $('#quickUploadDoc').click(function() {
                $('#documentUpload').click();
            });

            function initializeDocumentUpload() {
                const uploadArea = $('#documentUploadArea');
                const fileInput = $('#documentUpload');

                // Click to upload
                uploadArea.click(function() {
                    fileInput.click();
                });

                // File selection
                fileInput.change(function() {
                    const files = this.files;
                    for (let file of files) {
                        uploadDocument(file);
                    }
                });

                // Drag and drop
                uploadArea.on('dragover', function(e) {
                    e.preventDefault();
                    $(this).addClass('dragover');
                });

                uploadArea.on('dragleave', function(e) {
                    e.preventDefault();
                    $(this).removeClass('dragover');
                });

                uploadArea.on('drop', function(e) {
                    e.preventDefault();
                    $(this).removeClass('dragover');
                    
                    const files = e.originalEvent.dataTransfer.files;
                    for (let file of files) {
                        uploadDocument(file);
                    }
                });
            }

            function uploadDocument(file) {
                console.log('Uploading document:', file.name);
                
                // Create document entry
                const documentHtml = `
                    <div class="uploaded-document">
                        <div class="document-info">
                            <div class="document-icon doc-text">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div>
                                <h6 class="mb-1">${file.name}</h6>
                                <div class="small text-muted">${(file.size / 1024 / 1024).toFixed(2)} MB ‚Ä¢ Subiendo...</div>
                                <div class="processing-status status-processing">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Subiendo y procesando...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                $('.uploaded-documents').prepend(documentHtml);
                
                // Simulate upload and processing
                setTimeout(() => {
                    $('.uploaded-documents .processing-status').first()
                        .removeClass('status-processing')
                        .addClass('status-processed')
                        .html('<i class="fas fa-check-circle"></i> <span>Procesado y vectorizado</span>');
                }, 3000);
            }

            function gatherAIConfiguration() {
                return {
                    providers: {
                        openai: {
                            active: $('#openaiActive').is(':checked'),
                            apiKey: $('#openaiActive').closest('.provider-card').find('input[type="password"]').val(),
                            model: 'gpt-4-turbo',
                            priority: 1
                        },
                        claude: {
                            active: $('#claudeActive').is(':checked'),
                            apiKey: $('#claudeActive').closest('.provider-card').find('input[type="password"]').val(),
                            model: 'claude-3-sonnet',
                            priority: 2
                        }
                    },
                    modules: {
                        clientes: {
                            chatEnabled: true,
                            provider: 'openai',
                            context: 'extended',
                            temperature: 0.7
                        }
                    },
                    variables: {
                        client: '{{clientName}}, {{companyName}}, ...',
                        proposal: '{{proposalId}}, {{proposalDate}}, ...',
                        system: '{{currentDate}}, {{companyName}}, ...'
                    }
                };
            }

            function showToast(message, type) {
                const toast = $(`
                    <div class="toast align-items-center text-white bg-${type === 'success' ? 'success' : type === 'info' ? 'info' : 'danger'} border-0 position-fixed" 
                         style="top: 20px; right: 20px; z-index: 9999;" role="alert">
                        <div class="d-flex">
                            <div class="toast-body">
                                ${message}
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                        </div>
                    </div>
                `);
                
                $('body').append(toast);
                
                const bsToast = new bootstrap.Toast(toast[0]);
                bsToast.show();
                
                toast.on('hidden.bs.toast', function() {
                    $(this).remove();
                });
            }
        });
    </script>
</body>
</html>
