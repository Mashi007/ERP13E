# =============================================================================
# ğŸ“ Ruta: /railway.toml
# ğŸ“„ Nombre: railway.toml  
# ğŸ—ï¸ PropÃ³sito: ConfiguraciÃ³n de deployment Railway optimizada
# âš¡ Performance: Build optimizado, variables de entorno, health checks
# ğŸ”’ Seguridad: ConfiguraciÃ³n de puertos y servicios seguros
# =============================================================================

[build]
# ğŸ”¨ ConfiguraciÃ³n de Build
builder = "nixpacks"
buildCommand = "pip install --no-cache-dir -r requirements.txt"

[deploy]
# ğŸš€ ConfiguraciÃ³n de Deployment
startCommand = "gunicorn --bind 0.0.0.0:$PORT --workers 2 --timeout 60 --worker-class sync --worker-tmp-dir /dev/shm --log-level info wsgi:application"
healthcheckPath = "/health"
healthcheckTimeout = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

[env]
# ğŸŒ Variables de Entorno por Defecto
PYTHONPATH = "."
PYTHONUNBUFFERED = "1"
FLASK_ENV = "production"
GUNICORN_CMD_ARGS = "--preload --log-level info"

# ğŸ“Š ConfiguraciÃ³n de Performance
WEB_CONCURRENCY = "2"
MAX_WORKERS = "4"
WORKER_TIMEOUT = "60"
KEEP_ALIVE = "5"

# ğŸ”’ ConfiguraciÃ³n de Seguridad
SECURE_SSL_REDIRECT = "True"
SESSION_COOKIE_SECURE = "True"
SESSION_COOKIE_HTTPONLY = "True"

[services.web]
# ğŸŒ ConfiguraciÃ³n del Servicio Web
port = 8080
protocol = "http"

[services.web.healthcheck]
# ğŸ¥ Health Check Configuration
path = "/health"
interval = 30
timeout = 10
retries = 3
start_period = 60

[logging]
# ğŸ“ ConfiguraciÃ³n de Logging
level = "info"
format = "json"

# ğŸ”§ Configuraciones especÃ­ficas para ERP13 Enterprise
[variables]
APP_NAME = "ERP13 Enterprise"
APP_VERSION = "1.0.0"
SERVICE_NAME = "erp13-web"
