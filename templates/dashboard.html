{% extends "layout.html" %}

{% block title %}Dashboard - ERP Enterprise{% endblock %}

{% block extra_css %}
<style>
.kpi-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: none;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    height: 140px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.kpi-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

.kpi-icon {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
}

.kpi-value {
    font-size: 2rem;
    font-weight: 700;
    margin: 0.5rem 0;
}

.kpi-label {
    font-size: 0.9rem;
    color: #6b7280;
    font-weight: 500;
}

.chart-container {
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    margin: 2rem 0;
}

.activity-item {
    padding: 1rem;
    border-left: 4px solid var(--primary-color);
    background: #f8fafc;
    margin-bottom: 1rem;
    border-radius: 0 8px 8px 0;
}

.quick-action-btn {
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    padding: 1.5rem;
    text-decoration: none;
    color: #374151;
    transition: all 0.3s ease;
    display: block;
    text-align: center;
}

.quick-action-btn:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
}
</style>
{% endblock %}

{% block content %}
<!-- Dashboard Header -->
<div class="row mb-4">
    <div class="col-12">
        <h1 class="display-6 fw-bold text-dark">
            <i class="fas fa-tachometer-alt text-primary me-3"></i>
            Dashboard ERP Enterprise
        </h1>
        <p class="lead text-muted">Panel de control del sistema de gesti√≥n empresarial</p>
    </div>
</div>

<!-- KPIs Dashboard -->
<div class="row mb-4">
    <div class="col-md-3 mb-3">
        <div class="kpi-card text-center">
            <div class="kpi-icon text-primary">
                <i class="fas fa-file-invoice"></i>
            </div>
            <div class="kpi-value text-primary">24</div>
            <div class="kpi-label">Facturas Este Mes</div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="kpi-card text-center">
            <div class="kpi-icon text-success">
                <i class="fas fa-users"></i>
            </div>
            <div class="kpi-value text-success">156</div>
            <div class="kpi-label">Clientes Activos</div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="kpi-card text-center">
            <div class="kpi-icon text-warning">
                <i class="fas fa-euro-sign"></i>
            </div>
            <div class="kpi-value text-warning">‚Ç¨45,230</div>
            <div class="kpi-label">Facturaci√≥n Mensual</div>
        </div>
    </div>
    <div class="col-md-3 mb-3">
        <div class="kpi-card text-center">
            <div class="kpi-icon text-info">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="kpi-value text-info">+12%</div>
            <div class="kpi-label">Crecimiento</div>
        </div>
    </div>
</div>

<!-- Main Content Row -->
<div class="row">
    <!-- Chart Section -->
    <div class="col-lg-8">
        <div class="chart-container">
            <h4 class="mb-3">
                <i class="fas fa-chart-area text-primary me-2"></i>
                Facturaci√≥n Mensual
            </h4>
            <div style="height: 300px; background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                <div class="text-center">
                    <i class="fas fa-chart-line fa-3x text-muted mb-3"></i>
                    <h5 class="text-muted">Gr√°fico de Facturaci√≥n</h5>
                    <p class="text-muted">Integraci√≥n con Chart.js en desarrollo</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Activity Sidebar -->
    <div class="col-lg-4">
        <div class="chart-container">
            <h4 class="mb-3">
                <i class="fas fa-clock text-warning me-2"></i>
                Actividad Reciente
            </h4>
            
            <div class="activity-item">
                <small class="text-muted">Hace 2 horas</small>
                <div class="fw-bold">Nueva factura creada</div>
                <div class="text-muted">FAC-2024-001 - ‚Ç¨1,590.00</div>
            </div>
            
            <div class="activity-item">
                <small class="text-muted">Hace 4 horas</small>
                <div class="fw-bold">Cliente registrado</div>
                <div class="text-muted">TechSolutions S.L.</div>
            </div>
            
            <div class="activity-item">
                <small class="text-muted">Ayer</small>
                <div class="fw-bold">Pago recibido</div>
                <div class="text-muted">‚Ç¨2,420.00 - InnovaCorp Ltd.</div>
            </div>
            
            <div class="activity-item">
                <small class="text-muted">Hace 2 d√≠as</small>
                <div class="fw-bold">Exportaci√≥n contable</div>
                <div class="text-muted">Descarga mensual Excel</div>
            </div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="row mt-4">
    <div class="col-12">
        <h4 class="mb-3">
            <i class="fas fa-bolt text-warning me-2"></i>
            Acciones R√°pidas
        </h4>
    </div>
    
    <div class="col-md-3 mb-3">
        <a href="/facturacion/clientes" class="quick-action-btn">
            <i class="fas fa-plus-circle fa-2x text-primary mb-2"></i>
            <div class="fw-bold">Nueva Factura</div>
            <small class="text-muted">Crear factura de cliente</small>
        </a>
    </div>
    
    <div class="col-md-3 mb-3">
        <a href="/facturacion/estados-pago" class="quick-action-btn">
            <i class="fas fa-chart-line fa-2x text-success mb-2"></i>
            <div class="fw-bold">Estados de Pago</div>
            <small class="text-muted">Revisar cobros</small>
        </a>
    </div>
    
    <div class="col-md-3 mb-3">
        <a href="/contabilidad/apuntes" class="quick-action-btn">
            <i class="fas fa-balance-scale fa-2x text-warning mb-2"></i>
            <div class="fw-bold">Apuntes Contables</div>
            <small class="text-muted">Conciliaci√≥n bancaria</small>
        </a>
    </div>
    
    <div class="col-md-3 mb-3">
        <a href="/facturacion/exportacion" class="quick-action-btn">
            <i class="fas fa-download fa-2x text-info mb-2"></i>
            <div class="fw-bold">Exportar Datos</div>
            <small class="text-muted">Descargar reportes</small>
        </a>
    </div>
</div>

<!-- System Status -->
<div class="row mt-4">
    <div class="col-12">
        <div class="chart-container">
            <h4 class="mb-3">
                <i class="fas fa-server text-success me-2"></i>
                Estado del Sistema
            </h4>
            
            <div class="row">
                <div class="col-md-3 text-center">
                    <i class="fas fa-database fa-2x text-success mb-2"></i>
                    <div class="fw-bold">Base de Datos</div>
                    <small class="text-success">Operativo</small>
                </div>
                <div class="col-md-3 text-center">
                    <i class="fas fa-server fa-2x text-success mb-2"></i>
                    <div class="fw-bold">API Rest</div>
                    <small class="text-success">Operativo</small>
                </div>
                <div class="col-md-3 text-center">
                    <i class="fas fa-cloud fa-2x text-success mb-2"></i>
                    <div class="fw-bold">Railway Deploy</div>
                    <small class="text-success">Activo</small>
                </div>
                <div class="col-md-3 text-center">
                    <i class="fas fa-shield-alt fa-2x text-warning mb-2"></i>
                    <div class="fw-bold">Redis Cache</div>
                    <small class="text-warning">Pendiente</small>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('üìä Dashboard ERP Enterprise cargado');
    
    // Simular actualizaci√≥n de KPIs cada 30 segundos
    setInterval(() => {
        console.log('üîÑ Actualizando KPIs...');
        // Aqu√≠ se pueden hacer llamadas AJAX para actualizar datos en tiempo real
    }, 30000);
    
    // Animaci√≥n de entrada para las cards
    const cards = document.querySelectorAll('.kpi-card, .chart-container, .quick-action-btn');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            card.style.transition = 'all 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });
});
</script>
{% endblock %}
